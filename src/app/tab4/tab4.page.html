<ion-header>
  <ion-toolbar>
    <ion-title>
      Shopping Cart
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content body>
  <ion-grid>
    <ion-row><ion-button (click)="emptyCart()">Clear Cart</ion-button></ion-row>
    <ion-row><ion-button (click)="addToCart(testProduct1)">Product 1</ion-button></ion-row>
    <ion-row><ion-button (click)="addToCart(testProduct2)">Product 2</ion-button></ion-row>
    <ion-row><ion-button (click)="debug()">debug</ion-button></ion-row>
  </ion-grid>

  <ion-item>
    <ion-label>計算方式</ion-label>
    <ion-select [(ngModel)]="supermarket" (ionChange) = "calculateMethodChange()" placeholder="Select One">
      <ion-select-option value="min_price">按每件商品最低價計算</ion-select-option>
      <ion-select-option value="price_aeon">Aeon</ion-select-option>
      <ion-select-option value="price_dch">大昌行</ion-select-option>
      <ion-select-option value="price_marketplace">Marketplace</ion-select-option>
      <ion-select-option value="price_parknshop">百佳</ion-select-option>
      <ion-select-option value="price_wellcome">惠康</ion-select-option>
      <ion-select-option value="price_waston">屈臣氏</ion-select-option>

    </ion-select>
  </ion-item>

  <ion-list #slidingList>
    <ion-item-sliding *ngFor="let products of cart">
      <ion-item *ngIf="products.quantity!==0">
        <ion-text class="name">{{products.item.name_tc}}</ion-text>

        <ion-text>${{products.item.displayPrice[1]}}</ion-text>

        <ion-badge slot="end" color="primary">{{products.quantity}}</ion-badge>

        <ion-select [(ngModel)]="products.item.displayPrice[0]" (ionChange) = "displaySupermarketChange(products)" placeholder="Select One">
          <ion-select-option value="price_aeon">Aeon</ion-select-option>
          <ion-select-option value="price_dch">大昌行</ion-select-option>
          <ion-select-option value="price_marketplace">Marketplace</ion-select-option>
          <ion-select-option value="price_parknshop">百佳</ion-select-option>
          <ion-select-option value="price_wellcome">惠康</ion-select-option>
          <ion-select-option value="price_waston">屈臣氏</ion-select-option>
        </ion-select>

      </ion-item>

      <ion-item-options side="end">
        <ion-item-option (click)="removeProduct(products.item);">刪除</ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
    <ion-item>
      <ion-text class="total">{{total}}</ion-text>
    </ion-item>
  </ion-list>

</ion-content>
