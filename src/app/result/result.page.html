<ion-header >
    <ion-toolbar>
        <ion-searchbar #box placeholder="搜尋商品"  cancelButtonText="Custom Cancel" (keyup.enter)="Search(box.value)"> </ion-searchbar>
        <ion-icon name="barcode" class="scanner" slot="primary" (click)="scanCode()"></ion-icon>
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/"></ion-back-button>
        </ion-buttons>
    </ion-toolbar>
    <ion-card class="bar" no-shadow>
        <ion-icon name="funnel" class="options" (click)="showfilter()"></ion-icon>
        <ion-icon name="funnel" class="filter" (click)="sortItem()"></ion-icon>
    </ion-card>
</ion-header>
<ion-content>
        <ion-virtual-scroll [items]="fitems" >
                    <ion-item  *virtualItem="let fitem" >
                        <ion-grid detail (click)="onSelect(fitem)">
                    <ion-row>
                        <ion-col size="3" ><ion-img src="assets/product-img/{{fitem?.barcode}}.jpg" (ionImgDidLoad)="imageLoaded($event)"></ion-img></ion-col>
                        <ion-col size="7">
                            <ion-row class="brand">{{fitem?.brand_tc}} </ion-row>
                                <ion-row class="name" >{{fitem?.name_tc}}</ion-row>
                                <ion-row class="price" >
                                   <ion-img class="pricepic" src="assets/supermarket-img/{{fitem['minPrice'][0]?.supermarket}}.png"></ion-img>
                                 &nbsp;$ {{fitem['minPrice'][0]?.price}}
                            </ion-row>
                        </ion-col>
                        <ion-col size="1">
                            <ion-row>
                                <ion-button class = 'shop' [class.selected]="fitem === selected" (click)="popOver(fitem);$event.stopPropagation();"><ion-icon name="cart" class="cart"></ion-icon></ion-button>
                            </ion-row>
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </ion-item>
        </ion-virtual-scroll>
</ion-content>
